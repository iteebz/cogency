# CLI Display Format Specification

## Overview

Cogency uses a canonical ASCII display format that provides clear visual hierarchy for different types of agent activity. Each symbol represents a distinct cognitive or operational mode.

## Display Symbols

| Symbol | Meaning | Description |
|--------|---------|-------------|
| `~` | **Think** | Internal reasoning and planning |
| `>` | **Respond** | Direct communication with user |
| `○` | **Action** | Tool execution begins |
| `●` | **Result** | Tool execution complete |
| `%` | **Metrics** | Performance and token usage: `input➜output|duration` |

## Spacing Rules

**CANONICAL SPECIFICATION:**

- `\n\n` before **EACH** `>`  (Response sections)
- `\n\n` before **EACH** `~`  (Thinking sections)  
- `\n\n` before **EACH** `○`  (Tool actions)
- `\n` before **EACH** `●`    (Tool results - paired with actions)
- `\n\n` before **EACH** `%`  (Metrics - performance checkpoints)

## Example Output

```bash
$ cogency "read the test.txt file and tell me what you think about it" --mode resume --llm gemini --new

> I need to read the test.txt file first to see its contents

~ Let me use the file_read tool to access the file

○ Reading test.txt
● Read test.txt

% 450➜12|2.1s

~ Now I can see the file contains "hello world". This is a simple greeting text file

~ The content is basic but serves its purpose well for demonstrations

> I've read the test.txt file, which contains "hello world". This appears to be a simple test file with a basic greeting message. It's the kind of file commonly used for testing file operations, tutorials, or as a placeholder during development.

% 890➜67|4.8s
```

## Visual Hierarchy

The spacing creates clear cognitive separation:

1. **Command** (bash prompt)
2. **Thinking/Response** sections (maximum separation)
3. **Action/Result** pairs (paired but separated from other content)
4. **Metrics** (performance snapshots with emphasis)

## Design Philosophy

- **Visual breaks match semantic breaks** in the agent's cognitive process
- **○●** pairs stay visually connected (single `\n`) while maintaining separation from other content (`\n\n`)
- **Metrics serve as performance checkpoints** that punctuate the workflow
- **Scannability** - users can quickly identify different types of activity
- **Professional appearance** - breathing room creates polished CLI UX

## Metrics Format

The metrics line (`%`) displays performance data in the format:

```
% input_tokens➜output_tokens|duration_seconds
```

- **input_tokens**: Total tokens consumed from the LLM for this request
- **output_tokens**: Total tokens generated by the LLM for this request  
- **duration_seconds**: Wall-clock time for the request (to 1 decimal place)

Example: `% 890➜67|4.8s` means 890 input tokens, 67 output tokens, 4.8 seconds duration.

## Streaming Behavior

- `~` and `>` content streams continuously within each section
- `○`, `●`, `%` are discrete single-line events
- Each symbol type gets proper spacing regardless of content length

## Implementation Notes

- First occurrence of `~` or `>` in a sequence gets `\n\n` prefix
- Subsequent streaming content within the same type continues without additional prefixes
- All other symbols (`○`, `●`, `%`) always get their specified prefixes
- This creates consistent visual rhythm while supporting real-time streaming